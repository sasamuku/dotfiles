# Vimの基本操作方法

## モード概念（最重要）

Vimは**モード**という概念が特徴的です：

| モード | 説明 | 切り替え |
|--------|------|----------|
| **Normal** | カーソル移動・編集コマンド | `ESC` または `jj` |
| **Insert** | テキスト入力 | `i`, `a`, `o` など |
| **Visual** | テキスト選択 | `v`, `V`, `Ctrl+v` |
| **Command** | コマンド実行 | `:` |

---

## 1. 基本の移動（Normalモード）

### カーソル移動
```
    k (上)
    ↑
h ← ↓ → l
    j (下)
```

### 効率的な移動
| キー | 説明 |
|------|------|
| `w` | 次の単語の先頭 |
| `b` | 前の単語の先頭 |
| `e` | 単語の末尾 |
| `0` | 行頭 |
| `^` | 行頭（空白を除く） |
| `$` | 行末 |
| `gg` | ファイル先頭 |
| `G` | ファイル末尾 |
| `{数字}G` | 指定行へジャンプ（例: `10G`） |

---

## 2. 編集の開始（Normal→Insertモード）

| キー | 説明 |
|------|------|
| `i` | カーソル位置から入力 |
| `a` | カーソルの次から入力 |
| `I` | 行頭から入力 |
| `A` | 行末から入力 |
| `o` | 下に新しい行を作って入力 |
| `O` | 上に新しい行を作って入力 |

---

## 3. 基本的な編集（Normalモード）

### 削除
| キー | 説明 |
|------|------|
| `x` | 1文字削除 |
| `dd` | 1行削除 |
| `dw` | 単語削除 |
| `d$` | カーソルから行末まで削除 |

### コピー＆ペースト
| キー | 説明 |
|------|------|
| `yy` | 1行コピー |
| `yw` | 単語コピー |
| `p` | 貼り付け（後ろ） |
| `P` | 貼り付け（前） |

### その他
| キー | 説明 |
|------|------|
| `u` | 元に戻す（Undo） |
| `Ctrl+r` | やり直す（Redo） |
| `.` | 直前の操作を繰り返す |

---

## 4. Visual モード（選択）

| キー | 説明 |
|------|------|
| `v` | 文字単位で選択開始 |
| `V` | 行単位で選択開始 |
| `Ctrl+v` | 矩形選択 |

選択後: `d`（削除）、`y`（コピー）、`>`（インデント）など

---

## 5. 検索・置換

### 検索
| キー | 説明 |
|------|------|
| `/word` | 前方検索 |
| `?word` | 後方検索 |
| `n` | 次の検索結果 |
| `N` | 前の検索結果 |

### 置換
```vim
:%s/old/new/g       " 全体置換
:%s/old/new/gc      " 確認しながら置換
:s/old/new/g        " 現在行のみ
```

---

## 6. ファイル操作（Commandモード）

| コマンド | 説明 |
|----------|------|
| `:w` | 保存 |
| `:q` | 終了 |
| `:wq` | 保存して終了 |
| `:q!` | 保存せず強制終了 |
| `:qa` | 全てのウィンドウを閉じる |
| `:wqa` | 全て保存して閉じる |
| `:qa!` | 全て保存せず強制終了 |
| `:e filename` | ファイルを開く |

---

## 7. 画面分割・ウィンドウ操作

### 分割
| コマンド | 説明 |
|----------|------|
| `:split` (`:sp`) | 水平分割 |
| `:vsplit` (`:vs`) | 垂直分割 |
| `:split filename` | ファイルを水平分割で開く |
| `:vsplit filename` | ファイルを垂直分割で開く |

### ウィンドウ間の移動
| キー | 説明 |
|------|------|
| `Ctrl+w h` | 左のウィンドウへ |
| `Ctrl+w j` | 下のウィンドウへ |
| `Ctrl+w k` | 上のウィンドウへ |
| `Ctrl+w l` | 右のウィンドウへ |
| `Ctrl+w w` | 次のウィンドウへ（順番に） |

### ウィンドウのサイズ変更
| キー | 説明 |
|------|------|
| `Ctrl+w =` | 全ウィンドウを均等サイズに |
| `Ctrl+w +` | 高さを増やす |
| `Ctrl+w -` | 高さを減らす |
| `Ctrl+w >` | 幅を増やす |
| `Ctrl+w <` | 幅を減らす |

### ウィンドウを閉じる
| キー | 説明 |
|------|------|
| `Ctrl+w q` | 現在のウィンドウを閉じる |
| `Ctrl+w o` | 現在のウィンドウ以外を全て閉じる |

---

## 💡 最初に覚えるべき5つ

1. `i` → テキスト入力 → `ESC`（Normalモードに戻る）
2. `hjkl` でカーソル移動
3. `dd` で行削除、`u` で元に戻す
4. `:w` で保存、`:q` で終了
5. `/word` で検索、`n` で次へ

---

## 🎓 練習方法

```bash
# Vim組み込みチュートリアル（超おすすめ）
vimtutor

# 所要時間: 約30分
```

**コツ**: 最初は遅くても、1週間使えば指が覚えます！

---

## 📝 Neovimカスタムキーバインド

このdotfilesで設定されているNeovim固有のキーバインド（`.config/nvim/init.lua`）:

### 基本設定
- **Leaderキー**: `Space`
- **jj**: インサートモードを抜けて保存（素早く2回jを押す）

### ファイル検索（Telescope）
| キー | 説明 |
|------|------|
| `<Space>ff` | ファイル検索 |
| `Ctrl+p` | ファイル検索（VSCode風） |
| `<Space>fg` | テキスト検索（Live grep） |
| `Ctrl+f` | テキスト検索（VSCode風） |
| `<Space>fb` | バッファ検索 |

### バッファ管理（buffer_manager）
| キー | 説明 |
|------|------|
| `Ctrl+Tab` | バッファメニューを開く |
| `Ctrl+Shift+Tab` | 前のバッファへ（MRU順） |

### ファイルエクスプローラー（nvim-tree）
| キー | 説明 |
|------|------|
| `<Space>ee` | ファイルエクスプローラー開閉 |
| `Ctrl+b` | ファイルエクスプローラー開閉（VSCode風） |
| `<Space>ef` | 現在のファイルをエクスプローラーで探す |
| `Ctrl+e` | 現在のファイルをエクスプローラーで探す（VSCode風） |

### Git操作（fugitive / lazygit / diffview）
| キー | 説明 |
|------|------|
| `<Space>gs` | Git status（vim-fugitive） |
| `<Space>gd` | Git diff --staged |
| `<Space>gg` | LazyGit を開く |
| `Ctrl+g` | LazyGit を開く（VSCode風） |
| `<Space>gv` | Diffview を開く |
| `<Space>gc` | Diffview を閉じる |
| `<Space>gh` | 現在のファイルの Git 履歴（Diffview） |
| `<Space>gH` | 全ファイルの Git 履歴（Diffview） |

### Git hunk操作（gitsigns）
| キー | 説明 |
|------|------|
| `]c` | 次の変更箇所へジャンプ |
| `[c` | 前の変更箇所へジャンプ |
| `<Space>hs` | hunk をステージ |
| `<Space>hr` | hunk をリセット |
| `<Space>hS` | バッファ全体をステージ |
| `<Space>hu` | hunk のステージを取り消し |
| `<Space>hR` | バッファ全体をリセット |
| `<Space>hp` | hunk をプレビュー |
| `<Space>hb` | 行の blame を表示 |
| `<Space>tb` | 行の blame 表示を切り替え |
| `<Space>hd` | diff を表示 |
| `<Space>hD` | diff を表示（HEAD~比較） |

### ファイルパス・URL操作
| キー | 説明 |
|------|------|
| `<Space>cp` | ファイルの相対パスをコピー |
| `<Space>cP` | ファイルの絶対パスをコピー |
| `<Space>cc` (Visual) | ファイルパスと選択コードをフォーマット付きでコピー |
| `<Space>cr` | GitHub リモートURLをコピー |
| `<Space>cr` (Visual) | GitHub リモートURLを行番号付きでコピー |
| `<Space>fo` | Finder でファイルを表示 |

### LSP（Language Server Protocol）
| キー | 説明 |
|------|------|
| `F12` | 定義にジャンプ |
| `Shift+F12` | 参照を表示 |
| `K` | ホバーヘルプ |
| `gi` | 実装にジャンプ |
| `Ctrl+k` | シグネチャヘルプ |

### その他
| キー | 説明 |
|------|------|
| `<Space>r` | 設定を再読み込み（Lazy reload） |
